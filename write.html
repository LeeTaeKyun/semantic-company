<html>
    
    <head>
        <meta charset="utf-8">
        <title>

        </title>
                <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css">
                <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/components/container.min.css">
                  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/components/dropdown.min.css">
                <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/components/popup.min.css">
                  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script
        src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
        crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/components/dropdown.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/components/popup.min.js"></script>
          <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <style>
    body>.ui.container{
    padding-top: 5em;
    padding-bottom: 5em;
  }
    .ui.card>.image {height:200px}

   .form .ui.fluid{ padding: 3.5em 1em 1em;}

   .display-in-b{display:inline-block}
   .doubling.one .column .field{padding:15px}
   .input-style1{width:60% !important; vertical-align: middle !important}
   .ui-state-highlight {
    height: 49px;
    border: 2px dotted #DEDEDE;
    }
    .ui.list {
        min-height: 50px;
    }
        </style>
    </head>
<body>
<div class="ui fixed transparent inverted menu">
    <div class="ui container">
      <a href="#" class="header item">
        설문조사
      </a>
      <a href="#" class="item">Home</a>
      <div class="ui simple dropdown item">
        Dropdown <i class="dropdown icon"></i>
        <div class="menu">
          <a class="item" href="#">Link Item</a>
          <a class="item" href="#">Link Item</a>
          <div class="divider"></div>
          <div class="header">Header Item</div>
          <div class="item">
            <i class="dropdown icon"></i>
            Sub Menu
            <div class="menu">
              <a class="item" href="#">Link Item</a>
              <a class="item" href="#">Link Item</a>
            </div>
          </div>
          <a class="item" href="#">Link Item</a>
        </div>
      </div>
    </div>
  </div>
<div class="ui container">

  <h2 class="ui header">write</h2>
  <form class="ui form">
      <div class="ui fluid vertical menu">
        <div class="field required ">
          <label>설문조사제목</label>
          <input type="text" name="subject" placeholder="설문조사 제목을 입력하세요" >
        </div>

        <div class="field required ">
          <label>설문조사내용</label>
          <textarea type="text" name="memo" placeholder="설문조사 내용을 입력하세요" ></textarea>
        </div>
    </div>
  <div class="ui menu grid fluid  item-container">
    <!--<div class="doubling one column row">
      <div class="column centered">
        <a href="#Move" id="moveItem "><i class="icon Move large black"></i></a>
      </div>
    </div>-->
    <div class="ui raised segment grid item-group">
      <div class="doubling two column row">
        <div class="column">
          <div class="field">
            <input type="text" name="subject" placeholder="질문을 입력하세요" >
          </div>
        </div>
        <div class="column item-sub-div">
          <div class="customDropdownSearchTextInput ui selection dropdown ">
            <input type="hidden" name="gender"> 
            <div class="default text"><i class="icon Selected Radio"></i> 질문종류</div>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item item-type" data-value="1"><i class="icon Selected Radio"></i>객관식</div>
              <div class="item item-type" data-value="2"><i class="icon Check Square"></i>체크박스</div>
              <div class="item item-type" data-value="3"><i class="icon Toggle Down"></i>드롭다운</div>
              <div class="item item-type" data-value="4"><i class="icon Text Cursor"></i>단답형</div>
              <div class="item item-type" data-value="5"><i class="icon Align Left"></i>장문형</div>
            </div>
          </div>  
        </div>
      </div>

      <div id="optSquare" class="doubling one column row"> <!-- 옵션추가 -->
        <div class="item-opt-div column">
          <div class="item-opt-row column">
              <div class="field">
                <i class="icon Radio large"></i>
                <input type="text" class="input-style1"  >   
                <a href="#optRemove" onclick="survey.optRemove(this)"><i class="icon large Remove black"></i></a>
                </div>
          </div>
          <div class="item-opt-row column">
              <div class="field">
                <i class="icon Radio large"></i>
                <input type="text" class="input-style1"  placeholder="옵션2">   
                <a href="#optRemove" onclick="survey.optRemove(this)"><i class="icon large Remove black"></i></a>
                </div>
          </div>
        </div>

        <div class="column">
            <div class="field">
              <i class="icon Radio large"></i> <p class="display-in-b"><b onclick="survey.optAdd(this);">옵션추가</b>&nbsp;또는&nbsp; <a href="#gita" onclick="return false;">기타추가</a></p>
            </div>
        </div>
        
        <div class="column right aligned">
          <div class="ui clearing divider"></div>
          <div class="row">
              <i class="icon Copy link large" onclick="survey.itemAdd(this);"></i>
              <i class="icon Trash link large" onclick="survey.itemRemove(this)"></i>
              <!--<div class="ui divider vertical"></div>-->
             <div class="ui toggle checkbox">
              <input type="checkbox" name="public">
              <label>필수체크</label>
            </div>
          </div>
        </div>
      </div>
  </div>
 <!-- type변경로직 opt저장로직, opt삭제로직, opt추가 or 기타추가로직, item추가로직, item삭제로직, item복사로직 -->
  
  <div class="ui raised segment grid item-group">
     <div class="doubling two column row">
        <div class="column">
          <div class="field">
            <input type="text" name="subject" placeholder="질문을 입력하세요">
          </div>
        </div>
        <div class="column item-sub-div">
          <div class="customDropdownSearchTextInput ui selection dropdown ">
            <input type="hidden" name="gender"> 
            <div class="default text"><i class="icon Selected Radio"></i> 질문종류</div>
            <i class="dropdown icon"></i>
            <div class="menu">
              <div class="item item-type" data-value="1"><i class="icon Selected Radio"></i>객관식</div>
              <div class="item item-type" data-value="2"><i class="icon Check Square"></i>체크박스</div>
              <div class="item item-type" data-value="3"><i class="icon Toggle Down"></i>드롭다운</div>
              <div class="item item-type" data-value="4"><i class="icon Text Cursor"></i>단답형</div>
              <div class="item item-type" data-value="5"><i class="icon Align Left"></i>장문형</div>
            </div>
          </div>  
        </div>
      </div>

    <div class="doubling one column row item-opt-div"> <!-- 옵션추가 -->
        <div class="column item-opt-row">
            <div class="field ">
              <i class="icon Square Outline large"></i>
              <input class="input-style1"  placeholder="옵션1">   
              <a href="#optRemove" onclick=""><i class="icon large Remove black"></i></a>
              </div>
        </div>
        <div class="column">
            <div class="field">
              <i class="icon Square Outline large"></i> <p class="display-in-b"><b onclick="return false;">옵션추가</b>&nbsp;또는&nbsp; <a href="#gita" onclick="return false;">기타추가</a></p>
            </div>
        </div>
        <div class="column right aligned">
             <div class="ui clearing divider"></div>
          <div class="row">
              <i class="icon Copy link large" onclick="survey.itemAdd(this);"></i>
              <i class="icon Trash link large"></i>
              <div class="ui divider vertical"></div>
             <div class="ui toggle checkbox">
              <input type="checkbox" name="public">
              <label>필수체크</label>
            </div>
          </div>
        </div>
      </div>
  </div>
  </div>
 

</form>
      

               <!-- <div class="ui form">
                    <div class="five wide field">
                    <div class="field inline">
                        <label for="firstname">firstname</label>
                        <input name="first_name" placeholder="Name"/>
                    </div>
                     <div class="field">
                        <label for="last_name">last_name</label>
                        <input name="last_name" placeholder="last_name"/>
                    </div>
                    </div>
                </div>
                -->

        <div class="ui compact vertical labeled icon menu" style="position:absolute;right:220px">
       
        <div class="item">
            <i class="icon Add Circle"> </i>
            추가
        </div>
         <div class="item">
            <i class="icon Angle Double Up"></i>
            위로
        </div>
         <div class="item">
            <i class="icon Angle Double Down"></i>
            아래로
        </div>
    </div>          
</div>
<div class="ui sticky fixed bottom"  style="right:70;bottom:40px;">

<button class="ui huge button purple" onclick="location.href='index.html'"><i class="icon List"></i>목록</button>

<!--<i class="huge icons">
  <i class="big loading Moon icon blue"></i>
  <i class="Write Square icon blue"></i>
</i>-->
</div>
<script>
$(".ui.dropdown").dropdown("set selected", "1"); 
//객관식으로 무조건 설정

$('.dropdown').dropdown({ 
    // you can use any ui transition
    transition: 'drop',
     onChange:function(val){
      
     }
  });
//dropdown이용하기
var survey = new function() {
 
    this.type = "";

    this.optRemove = function(e){
      var optSquare = $(e).parents("#optSquare");
      var opt_row_num = optSquare.find(".item-opt-div .item-opt-row").length-2;

      if(opt_row_num<0){
          alert('더이상 삭제 할 수 없습니다.');
      }else{
        optSquare.find(".item-opt-div .item-opt-row").eq(opt_row_num).find(".input-style1").focus();
        $(e).parents(".item-opt-row").remove();
        //e.parentNode.parentNode.remove();

      }
      
    },

    this.optAdd = function(e){
      
     var optSquare = $(e).parents("#optSquare");
     var opt_row_num = optSquare.find(".item-opt-div .item-opt-row").length+1;
      optSquare.find(".item-opt-div").append(
      "<div class=\"item-opt-row column\"><div class=\"field \">"+
      "<i class=\"icon Radio large\"></i><input class=\"input-style1\"  placeholder=\"옵션"+opt_row_num+"\"><a href=\"#optRemove\" onclick=\"survey.optRemove(this)\">"+
      "<i class=\"icon large Remove black\"></i></a></div></div>"
      );
      optSquare.find(".item-opt-div .item-opt-row").eq(optSquare.find(".item-opt-div .item-opt-row").length-1).find(".input-style1").focus();
    },

    this.itemRemove = function(e){
      var itemGroup = $(e).parents(".item-container");
      var item_row_num = itemGroup.find(".item-group").length-2;
      
      
      if(item_row_num<0){
      
        alert('더이상 삭제 할 수 없습니다.');

      }else{

        $(e).parents(".item-group").remove();
        itemGroup.find(".item-group").eq(item_row_num).find("input[name='subject']").focus();
      }

    },

    this.itemAdd = function(e){

     var itemCont = $(e).parents(".item-container");
     var item_now_num = $(e).parents(".item-group").index();
     var item_copy_item = $(e).parents(".item-group").clone();

     itemCont.find(".item-group").eq(item_now_num).after(item_copy_item);
     itemCont.find(".item-group").eq(item_now_num+1).find("input[name='subject']").focus();
    }

}
  



$(function () {
    $('.item-opt-div').sortable({
         //connectWith: ".item-opt-div",
        placeholder: "ui-state-highlight",
         opacity: 0.8,
         revert: true,

        receive: function (event, ui) {
            //updateListsHeight();
        }
    });
    $(".item-container").sortable({
        //connectWith: ".item-opt-div",
      placeholder: "ui-state-highlight",
        opacity: 0.8,
        revert: true,

      receive: function (event, ui) {
          //updateListsHeight();
      }
    });
    $( ".item-opt-div" ).disableSelection();

    //updateListsHeight();
   
    // $('#saveRules').click(function () {
    //     elements = $('#list2 .item .header');
    //     var arr;
    //     arr = [];
    //     arr = $.map(elements, function (a) {
    //         return a.innerHTML;
    //     });
    //     alert(arr.length === 0 ? null : arr.join(','));
    // });
});
</script>
    </body>
</html>